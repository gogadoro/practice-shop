{"ast":null,"code":"import { takeLatest, put, all, call } from \"redux-saga/effects\";\nimport { getCurrentUser, setUserDbFromAuth } from '../../utils/firebase/firebase';\nimport { signInFaild, signInSuccess } from \"./user.action\";\nimport { USER_ACTION_TYPE } from \"./user.types\";\nexport function* getSnapshotFromUser(userAuth, additionalDetails) {\n  try {\n    const userSnapshot = yield call(setUserDbFromAuth, userAuth, additionalDetails);\n    console.log(userSnapshot);\n    console.log(userSnapshot.data()); // if (userSnapshot) {\n    //    yield put(signInSuccess(userSnapshot({userSnapshot.id: userAuth.id})))\n    // }\n  } catch (error) {\n    yield put(signInFaild(error));\n  }\n}\nexport function* isUserAuthenticated() {\n  try {\n    const userAuth = yield call(getCurrentUser);\n    if (!userAuth) return;\n    yield call(getSnapshotFromUser, userAuth);\n  } catch (error) {\n    yield put(signInFaild(error));\n  }\n}\nexport function* onCheckUserSession() {\n  yield takeLatest(USER_ACTION_TYPE.CHECK_USER_SESSION, call(isUserAuthenticated));\n}\nexport function* userSaga() {\n  yield all([call(onCheckUserSession)]);\n}","map":{"version":3,"names":["takeLatest","put","all","call","getCurrentUser","setUserDbFromAuth","signInFaild","signInSuccess","USER_ACTION_TYPE","getSnapshotFromUser","userAuth","additionalDetails","userSnapshot","console","log","data","error","isUserAuthenticated","onCheckUserSession","CHECK_USER_SESSION","userSaga"],"sources":["/Users/5e9e/Desktop/projects/web_apps/react/capston/practice-shop/src/store/user/user.saga.js"],"sourcesContent":["import { takeLatest, put, all, call } from \"redux-saga/effects\";\nimport  {getCurrentUser, setUserDbFromAuth} from '../../utils/firebase/firebase'\nimport { signInFaild, signInSuccess } from \"./user.action\";\nimport { USER_ACTION_TYPE } from \"./user.types\";\n\n\n\n\nexport function* getSnapshotFromUser (userAuth, additionalDetails) {\n   try {\n      const userSnapshot = yield call(\n         setUserDbFromAuth, \n         userAuth, \n         additionalDetails\n      )\n      \n      console.log(userSnapshot)\n      console.log(userSnapshot.data())\n      // if (userSnapshot) {\n      //    yield put(signInSuccess(userSnapshot({userSnapshot.id: userAuth.id})))\n      // }\n   } catch(error) {\n      yield put(signInFaild(error));\n   }\n}\n\nexport function* isUserAuthenticated () {\n   try {\n      const userAuth = yield call(getCurrentUser);\n      if(!userAuth) return;\n      yield call(getSnapshotFromUser, userAuth)\n   } catch (error) {\n      yield put(signInFaild(error))\n   }\n   \n}\n\nexport function* onCheckUserSession () {\n   yield takeLatest(USER_ACTION_TYPE.CHECK_USER_SESSION, call(isUserAuthenticated))\n}\n\nexport function* userSaga () {\n   yield all([call(onCheckUserSession)]);\n}"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B,QAA2C,oBAA3C;AACA,SAASC,cAAT,EAAyBC,iBAAzB,QAAiD,+BAAjD;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,eAA3C;AACA,SAASC,gBAAT,QAAiC,cAAjC;AAKA,OAAO,UAAUC,mBAAV,CAA+BC,QAA/B,EAAyCC,iBAAzC,EAA4D;EAChE,IAAI;IACD,MAAMC,YAAY,GAAG,MAAMT,IAAI,CAC5BE,iBAD4B,EAE5BK,QAF4B,EAG5BC,iBAH4B,CAA/B;IAMAE,OAAO,CAACC,GAAR,CAAYF,YAAZ;IACAC,OAAO,CAACC,GAAR,CAAYF,YAAY,CAACG,IAAb,EAAZ,EARC,CASD;IACA;IACA;EACF,CAZD,CAYE,OAAMC,KAAN,EAAa;IACZ,MAAMf,GAAG,CAACK,WAAW,CAACU,KAAD,CAAZ,CAAT;EACF;AACH;AAED,OAAO,UAAUC,mBAAV,GAAiC;EACrC,IAAI;IACD,MAAMP,QAAQ,GAAG,MAAMP,IAAI,CAACC,cAAD,CAA3B;IACA,IAAG,CAACM,QAAJ,EAAc;IACd,MAAMP,IAAI,CAACM,mBAAD,EAAsBC,QAAtB,CAAV;EACF,CAJD,CAIE,OAAOM,KAAP,EAAc;IACb,MAAMf,GAAG,CAACK,WAAW,CAACU,KAAD,CAAZ,CAAT;EACF;AAEH;AAED,OAAO,UAAUE,kBAAV,GAAgC;EACpC,MAAMlB,UAAU,CAACQ,gBAAgB,CAACW,kBAAlB,EAAsChB,IAAI,CAACc,mBAAD,CAA1C,CAAhB;AACF;AAED,OAAO,UAAUG,QAAV,GAAsB;EAC1B,MAAMlB,GAAG,CAAC,CAACC,IAAI,CAACe,kBAAD,CAAL,CAAD,CAAT;AACF"},"metadata":{},"sourceType":"module"}