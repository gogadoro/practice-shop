{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithRedirect, signInWithPopup, GoogleAuthProvider, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, doc, getDoc, setDoc, collection, writeBatch, query, getDocs } from 'firebase/firestore';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCR8wdcaCzNTJHa9yoOST241p3hOOD8Fpo\",\n  authDomain: \"practice-shop-db-1ad74.firebaseapp.com\",\n  projectId: \"practice-shop-db-1ad74\",\n  storageBucket: \"practice-shop-db-1ad74.appspot.com\",\n  messagingSenderId: \"631247507579\",\n  appId: \"1:631247507579:web:cb6839dc34037bffbed2de\"\n};\nconst firebaseApp = initializeApp(firebaseConfig);\nconst GoogleProvider = new GoogleAuthProvider();\nexport const auth = getAuth();\nexport const signIn_GooglePopup = () => signInWithPopup(auth, GoogleProvider);\nexport const signIn_GoogleRedirect = () => signInWithRedirect(auth, GoogleProvider);\nexport const db = getFirestore();\nexport const addCollectionAndDocuments = async (collectionKey, objectToAdd) => {\n  const collectionRef = collection(db, collectionKey);\n  const batch = writeBatch(db);\n  objectToAdd.forEach(object => {\n    const docRef = doc(collectionRef, object.title.toLowerCase());\n    batch.set(docRef, object);\n  });\n  await batch.commit();\n  console.log('done');\n};\nexport const getCategoriesAndDocuments = async () => {\n  const collectionRef = collection(db, 'categories');\n  const q = query(collectionRef);\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnapshot => docSnapshot.data());\n};\nexport const setUserDbFromAuth = async function (userAuth) {\n  let additionalInfor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!userAuth) return;\n  const userDocRef = doc(db, 'users', userAuth.uid);\n  const userSnapshot = await getDoc(userDocRef);\n\n  if (!userSnapshot.exists()) {\n    const email = userAuth.email;\n    const displayName = userAuth.displayName;\n    const createdAt = new Date();\n\n    try {\n      await setDoc(userDocRef, {\n        email,\n        displayName,\n        createdAt,\n        ...additionalInfor\n      });\n    } catch (eer) {\n      console.log('error creating the user', eer.message);\n    }\n  }\n\n  return userSnapshot;\n};\nexport const createUserAuthWithEmailAndPassword = async (email, password) => {\n  if (!email | !password) {\n    console.log('이메일,암호가 전달되지 않음');\n    return;\n  }\n\n  return await createUserWithEmailAndPassword(auth, email, password);\n};\nexport const signInUserAuthWithEmailAndPassword = async (email, password) => {\n  if (!email | !password) {\n    console.log('이메일,암호가 전달되지 않음');\n    return;\n  }\n\n  return await signInWithEmailAndPassword(auth, email, password);\n};\nexport const signOutUser = async () => await signOut(auth);\nexport const onAuthStateChangedListener = callback => {\n  onAuthStateChanged(auth, callback);\n};\nexport const getCurrentUser = () => {\n  return new Promise((resolve, reject) => {\n    const unsubscribe = onAuthStateChanged(auth, userAuth => {\n      unsubscribe();\n      resolve(userAuth);\n    }, reject);\n  });\n};","map":{"version":3,"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","GoogleProvider","auth","signIn_GooglePopup","signIn_GoogleRedirect","db","addCollectionAndDocuments","collectionKey","objectToAdd","collectionRef","batch","forEach","object","docRef","title","toLowerCase","set","commit","console","log","getCategoriesAndDocuments","q","querySnapshot","docs","map","docSnapshot","data","setUserDbFromAuth","userAuth","additionalInfor","userDocRef","uid","userSnapshot","exists","email","displayName","createdAt","Date","eer","message","createUserAuthWithEmailAndPassword","password","signInUserAuthWithEmailAndPassword","signOutUser","onAuthStateChangedListener","callback","getCurrentUser","Promise","resolve","reject","unsubscribe"],"sources":["/Users/5e9e/Desktop/projects/web_apps/react/capston/practice-shop/src/utils/firebase/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport {\n    getAuth,\n    signInWithRedirect,\n    signInWithPopup,\n    GoogleAuthProvider,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    signOut,\n    onAuthStateChanged,\n} from 'firebase/auth'\n\nimport {\n    getFirestore,\n    doc,\n    getDoc,\n    setDoc,\n    collection,\n    writeBatch,\n    query,\n    getDocs,\n} from 'firebase/firestore';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCR8wdcaCzNTJHa9yoOST241p3hOOD8Fpo\",\n    authDomain: \"practice-shop-db-1ad74.firebaseapp.com\",\n    projectId: \"practice-shop-db-1ad74\",\n    storageBucket: \"practice-shop-db-1ad74.appspot.com\",\n    messagingSenderId: \"631247507579\",\n    appId: \"1:631247507579:web:cb6839dc34037bffbed2de\"\n};\n\nconst firebaseApp = initializeApp(firebaseConfig);\n\nconst GoogleProvider = new GoogleAuthProvider();\n\nexport const auth = getAuth();\nexport const signIn_GooglePopup = () => signInWithPopup(auth, GoogleProvider)\nexport const signIn_GoogleRedirect = () => signInWithRedirect(auth, GoogleProvider)\n\n\nexport const db = getFirestore();\n\nexport const addCollectionAndDocuments = async (collectionKey, objectToAdd) => {\n    const collectionRef = collection(db, collectionKey)\n    const batch = writeBatch(db)\n\n    objectToAdd.forEach((object) => {\n        const docRef = doc(collectionRef, object.title.toLowerCase())\n        batch.set(docRef, object)\n    })\n\n    await batch.commit()\n    console.log('done')\n}\n\nexport const getCategoriesAndDocuments = async () => {\n    const collectionRef = collection(db, 'categories')\n    const q = query(collectionRef)\n\n    const querySnapshot = await getDocs(q)\n    return querySnapshot.docs.map((docSnapshot) => docSnapshot.data())\n}\n\nexport const setUserDbFromAuth = async (userAuth, additionalInfor={}) => {\n    if (!userAuth) return;\n\n    const userDocRef = doc(db, 'users', userAuth.uid);\n    const userSnapshot = await getDoc(userDocRef)\n\n    if (!userSnapshot.exists()) {\n        const email = userAuth.email;\n        const displayName = userAuth.displayName;\n        const createdAt = new Date();\n\n        try {\n            await setDoc(\n                userDocRef,\n                {\n                    email,\n                    displayName,\n                    createdAt,\n                    ...additionalInfor\n                }\n            );\n        } catch (eer) {\n            console.log('error creating the user', eer.message);\n        }\n    }\n\n    return userSnapshot;\n}\n\nexport const createUserAuthWithEmailAndPassword = async (email, password) => {\n    if (!email | !password) {\n        console.log('이메일,암호가 전달되지 않음');\n        return;\n    }\n\n    return await createUserWithEmailAndPassword(auth, email, password);\n}\n\nexport const signInUserAuthWithEmailAndPassword = async (email, password) => {\n    if (!email | !password) {\n        console.log('이메일,암호가 전달되지 않음');\n        return;\n    }\n\n    return await signInWithEmailAndPassword(auth, email, password);\n}\n\nexport const signOutUser = async() => await signOut(auth);\n\nexport const onAuthStateChangedListener = (callback) => {\n    onAuthStateChanged(auth, callback);\n}\n\nexport const getCurrentUser = () => {\n    return new Promise((resolve, reject) => {\n        const unsubscribe = onAuthStateChanged(auth,\n            (userAuth)=> { \n                unsubscribe(); \n                resolve(userAuth);}, \n            reject)\n    });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}